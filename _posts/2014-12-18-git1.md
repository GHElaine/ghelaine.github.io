---
layout : default
title : git使用心得（1）
---

# git使用心得（1）- “.gitignore” 
> Edit by Elaine @ 2014-12-18

今天无意间看自己的github上socket编程的练习代码库，发现好多无用的可执行文件，于是想要将这些可执行文件忽略，就这么简单的一件事，折腾了将近两个小时。下面来记录一下心得，有些坑，踩一次就该把它填平了。  

很明显，这事情.gitignore文件做起来最合适了。毫无疑问要修改这个文件。那么问题来了...  

**什么情况下.gitignore是不起作用的？**  
当第一次配置仓库的时候，没有把.gitignore文件配置合适，已经push过代码了，那么已经被跟踪的文件，.gitignore是无力忽略的。因此，初始化仓库的时候，应该有两个文件是被“习惯性添加”的，一个是“README.md”，另一个就是“.gitignore”。  

**如果初始化的时候就是没配置好怎么办？我就是任性想修改忽略规则怎么办？**     
1、`git rm -r --cached . ` 可以帮助删除当前本地库中所有的文件跟踪，也就是缓存，但不会删除本地库中的代码。

![image](/img/gitignore1.png)   

2、`vi .gitignore` 修改.gitignore文件。记得保存。  
3、`git add . ` 不解释。  
4、`git commit -m "restart .gitignore"`提交一次，此时.gitignore的新规则就生效了。  

**注意，此处有坑！**  
**如果在上述步骤2过后，你不小心忽略了3直接执行了4，你会发现，你的代码库里的代码，被全部delete了。** 

![image](/img/gitignore2.png)

既然错误已经铸成，就只能把还没同步的代码（其实是workspace现有的所有代码），`git add . `重新加进跟踪吧... 

![image](/img/gitignore4.png)

多亏我这个workspace只是用来存一些小代码，基本不存在版本控制的问题否则的话，呵呵...    

其实误操作导致的代码被删除，还是可以通过撤销commit找回来的。具体方法在这[git数据维护及恢复](http://git-scm.com/book/zh/ch9-7.html)

**说说.gitignore文件里面写什么**   
* 忽略某些后缀的文件（比如.exe）：*.exe  
* 忽略某个文件夹中的所有文件（比如文件夹a下）：a/\*  
* 指定跟踪某个后缀的文件（比如.cpp），即使文件所在位置的其他文件都被忽略：!\*.cpp  
* 说个特殊的，整个workspace中，只想跟踪某指定类型的文件（比如.cpp）：    
   
        /*   
        !*.cpp
  
  
-----
嗯，现在愈发觉得git是个好东西了。觉得不好用的时候，是自己没用熟练，也没习惯而已。还是玩不转，还是有很多坑等着我去踩，还是慢慢来吧。





